[["index.html", "My Report Acknowledgement", " My Report Prepared for Prepared by Al Irvine, B.Sc., R.P.Bio. New Graph Environment Version 0.0.1 2021-06-24 Acknowledgement Modern civilization has a long journey ahead to acknowledge and address the historic and ongoing impacts of colonialism that have resulted in harm to ecosystems on Turtle Island. That harm naturally extends to the cultures and livelihoods of those that have lived in harmony with the Yintahk/Laxyip (land) for many thousands of years. "],["fwa-streams.html", "1 FWA Streams", " 1 FWA Streams Load the double line streams used in channel_width_mapped ##gconnect to database conn &lt;- DBI::dbConnect( RPostgres::Postgres(), dbname = dbname_wsl, host = host_wsl, port = port_wsl, user = user_wsl, password = password_wsl ) ##get the segments that have a centreline (double line streams) q &lt;- (&quot;SELECT linear_feature_id, ceil(upstream_route_measure)::integer - floor(downstream_route_measure)::integer AS len, watershed_group_code FROM whse_basemapping.fwa_stream_networks_sp WHERE edge_type = 1250&quot;) streams &lt;- sf::st_read(conn, query = q) summary(streams$len) ## Min. 1st Qu. Median Mean 3rd Qu. Max. ## 1.0 86.0 181.0 294.5 362.0 9253.0 Lets look at distribution of lengths ggplot(select(streams, len), aes(x=len)) + geom_histogram(position=&quot;identity&quot;, size = 0.75)+ labs(x = &quot;length&quot;, y = &quot;#&quot;) + ggdark::dark_theme_bw(base_size = 11) ##segments less than 1000m long ggplot(select(streams, len) %&gt;% filter(len &lt; 1000), aes(x=len)) + geom_histogram(position=&quot;identity&quot;, size = 0.75)+ labs(x = &quot;length&quot;, y = &quot;#&quot;) + ggdark::dark_theme_bw(base_size = 11) ##segments less than 250m long ggplot(select(streams, len) %&gt;% filter(len &lt; 250), aes(x=len)) + geom_histogram(position=&quot;identity&quot;, size = 0.75)+ labs(x = &quot;length&quot;, y = &quot;#&quot;) + ggdark::dark_theme_bw(base_size = 11) ##how many streams are segments are smaller than 50m streams %&gt;% filter(len &gt; 1000) %&gt;% count() ## n ## 1 8286 streams_equal &lt;- streams %&gt;% mutate(cut = cut_number(len, n = 5)) %&gt;% group_by(cut) %&gt;% summarise(n = n()) streams_equal ## # A tibble: 5 x 2 ## cut n ## &lt;fct&gt; &lt;int&gt; ## 1 [1,70] 38500 ## 2 (70,138] 38232 ## 3 (138,235] 37768 ## 4 (235,427] 38064 ## 5 (427,9.25e+03] 38099 streams_interval &lt;- streams %&gt;% mutate(cut = cut_interval(len, n = 10)) %&gt;% group_by(cut) %&gt;% summarise(n = n()) streams_interval ## # A tibble: 10 x 2 ## cut n ## &lt;fct&gt; &lt;int&gt; ## 1 [1,926] 180821 ## 2 (926,1.85e+03] 8096 ## 3 (1.85e+03,2.78e+03] 1296 ## 4 (2.78e+03,3.7e+03] 294 ## 5 (3.7e+03,4.63e+03] 90 ## 6 (4.63e+03,5.55e+03] 33 ## 7 (5.55e+03,6.48e+03] 21 ## 8 (6.48e+03,7.4e+03] 7 ## 9 (7.4e+03,8.33e+03] 4 ## 10 (8.33e+03,9.25e+03] 1 streams_length &lt;- streams %&gt;% mutate(cut = case_when( len &lt; 100 ~ &#39;0_100&#39;, len &gt;= 100 &amp; len &lt; 500 ~ &#39;0100_500&#39;, len &gt;= 500 &amp; len &lt; 999 ~ &#39;0500_1000&#39;, len &gt;=999 ~ &#39;1000+&#39;)) streams_length_sum &lt;- streams_length %&gt;% group_by(cut) %&gt;% summarise(n = n()) streams_length_sum ## # A tibble: 4 x 2 ## cut n ## &lt;chr&gt; &lt;int&gt; ## 1 0_100 55821 ## 2 0100_500 104540 ## 3 0500_1000 21988 ## 4 1000+ 8314 ggplot(data = streams_length_sum, mapping = aes(x=cut, y = n)) + geom_bar(stat = &quot;identity&quot;) + # ylim(1000, 20000)+ # labs(x=&#39;test&#39;) + ggdark::dark_theme_bw(base_size = 11) ggplot(streams_length, aes(x=len)) + geom_histogram(position=&quot;identity&quot;, size = 0.75)+ labs(x = &quot;length&quot;, y = &quot;#&quot;) + facet_wrap(~cut, ncol = 2, scales = &quot;free&quot;)+ ggdark::dark_theme_bw(base_size = 11) "]]
